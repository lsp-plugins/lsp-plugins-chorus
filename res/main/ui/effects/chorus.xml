<plugin resizable="true">
	<hbox>
		<group ui:inject="GraphGroup" ipadding="0" expand="true" fill="true" text="labels.graphs.LFO">
			<grid rows="${(ex :in_r) ? 15 : 13}" cols="4" spacing="4">
				<!-- Row 1 -->
				<cell cols="2">
					<label text="LFO1" />
				</cell>
				<cell cols="2">
					<button id="lfo2" ui:inject="Button_cyan" text="LFO2" />
				</cell>
			
				<!-- Row 2 -->
				<!-- LFO 1 graph -->
				<cell cols="2">
					<graph width.min="200" expand="true" height.min="200" >
						<origin hpos="-1" vpos="1" visibility="false" />
						<origin hpos="-1" vpos="-1" visibility="false" />
		
						<!-- Grid -->
						<ui:with color="graph_alt_2">
							<marker v="45" />
							<marker v="135" />
							<marker v="225" />
							<marker v="315" />
							<marker v="0.125" ox="1" oy="0" />
							<marker v="0.375" ox="1" oy="0" />
							<marker v="0.625" ox="1" oy="0" />
							<marker v="0.875" ox="1" oy="0" />
						</ui:with>
		
						<ui:with color="graph_alt_1">
							<marker v="90" />
							<marker v="270" />
							<marker v="0.25" ox="1" oy="0" />
							<marker v="0.75" ox="1" oy="0" />
						</ui:with>
		
						<ui:with color="graph_sec">
							<marker v="180" />
							<marker v="0.5" ox="1" oy="0" />
						</ui:with>
		
						<!-- Axes -->
						<axis min="0" max="360" angle="1.5" visibility="false"/>
						<axis min="0" max="1" angle="0" visibility="false"/>
						<axis o="1" min="0" max="100" angle="0.5" visibility="false"/>
		
						<!-- Mesh -->
						<ui:for id="i" first="1" count="16"> 
							<mesh id="lgr_1"
								x.index="0"
								y.index="${i}"
								width="3"
								color="graph_mesh"
								smooth="true" />
						</ui:for>
		
						<!-- Markers -->
						<marker
							o="1" ox="2" oy="1"
							zero="0"
							id="xfade"
							editable="true"
							pointer="vsize"
							color="graph_marker_cycle"
							hcolor="graph_marker_cycle"
							color.a="0.5"
							hcolor.a="0.5" />
		
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}" ox="1" oy="0" color="graph_mesh" color.a="0.65"
									visibility=":vml_${i} ieq 1" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}l" ox="1" oy="0"
									color="(:ms) ? 'mid' : 'left'" color.a="0.65"
									visibility=":vml_${i}l ieq 1" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}r" ox="1" oy="0"
									color="(:ms) ? 'side' : 'right'" color.a="0.65"
									visibility=":vml_${i}r ieq 1" />
							</ui:for>
						</ui:if>
						
						<!-- Dots -->
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vms_${i}" y.id="vmp_${i}" color="graph_mesh" bcolor="graph_mesh"
									visibility=":vml_${i} ieq 1" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmp_${i}l" y.id="vms_${i}l"
									color="(:ms) ? 'mid' : 'left'"
									bcolor="(:ms) ? 'mid' : 'left'"
									visibility=":vml_${i}l ieq 1" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmp_${i}r" y.id="vms_${i}r"
									color="(:ms) ? 'side' : 'right'"
									bcolor="(:ms) ? 'side' : 'right'"
									visibility=":vml_${i}r ieq 1" />
							</ui:for>
						</ui:if>
		
						<!-- text -->
						<text x="0" y="0" halign="1" valign="-1" text="graph.values.min" />
						<text x="0" y="1" halign="-1" valign="-1" text="graph.values.max" />
						<text x="0" y="0.5" halign="0" valign="-1" text="graph.axis.depth" />
						<ui:for id="i" first="1" count="7">
							<text x="${:i*45}" y="0" halign="1" valign="1" text="graph.values.x:deg" text:value="${:i*45}" />
						</ui:for>
						<text x="360" y="0" halign="1" valign="1" text="graph.axis.phase" />
		
						<text x="360.0 - 3.6*:xfade" y="1" halign="-1" valign="1" text="labels.lfo.crossfade" color="graph_marker_cycle" color.a="0.5"/>
					</graph>
				</cell>
				
				<!-- LFO 2 graph -->
				<cell cols="2">
					<graph width.min="200" expand="true" height.min="200" >
						<origin hpos="-1" vpos="1" visibility="false" />
						<origin hpos="-1" vpos="-1" visibility="false" />
		
						<!-- Grid -->
						<ui:with color="graph_alt_2">
							<marker v="45" />
							<marker v="135" />
							<marker v="225" />
							<marker v="315" />
							<marker v="0.125" ox="1" oy="0" />
							<marker v="0.375" ox="1" oy="0" />
							<marker v="0.625" ox="1" oy="0" />
							<marker v="0.875" ox="1" oy="0" />
						</ui:with>
		
						<ui:with color="graph_alt_1">
							<marker v="90" />
							<marker v="270" />
							<marker v="0.25" ox="1" oy="0" />
							<marker v="0.75" ox="1" oy="0" />
						</ui:with>
		
						<ui:with color="graph_sec">
							<marker v="180" />
							<marker v="0.5" ox="1" oy="0" />
						</ui:with>
		
						<!-- Axes -->
						<axis min="0" max="360" angle="1.5" visibility="false"/>
						<axis min="0" max="1" angle="0" visibility="false"/>
						<axis o="1" min="0" max="100" angle="0.5" visibility="false"/>
		
						<!-- Mesh -->
						<ui:for id="i" first="1" count="8"> 
							<mesh id="lgr_2"
								x.index="0"
								y.index="${i}"
								width="3"
								color="graph_mesh"
								visibility="(:lfo2) and (:voices ige 2)"
								smooth="true" />
						</ui:for>
		
						<!-- Markers -->
						<marker
							o="1" ox="2" oy="1"
							zero="0"
							id="xfade"
							editable="true"
							pointer="vsize"
							color="graph_marker_cycle"
							hcolor="graph_marker_cycle"
							color.a="0.5"
							hcolor.a="0.5" />
		
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}" ox="1" oy="0" color="graph_mesh" color.a="0.65"
									visibility=":vml_${i} ieq 2" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}l" ox="1" oy="0"
									color="(:ms) ? 'mid' : 'left'" color.a="0.65"
									visibility=":vml_${i}l ieq 2" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<marker v=":vms_${i}r" ox="1" oy="0"
									color="(:ms) ? 'side' : 'right'" color.a="0.65"
									visibility=":vml_${i}r ieq 2" />
							</ui:for>
						</ui:if>
						
						<!-- Dots -->
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vms_${i}" y.id="vmp_${i}" color="graph_mesh" bcolor="graph_mesh"
									visibility=":vml_${i} ieq 2" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmp_${i}l" y.id="vms_${i}l"
									color="(:ms) ? 'mid' : 'left'"
									bcolor="(:ms) ? 'mid' : 'left'"
									visibility=":vml_${i}l ieq 2" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmp_${i}r" y.id="vms_${i}r"
									color="(:ms) ? 'side' : 'right'"
									bcolor="(:ms) ? 'side' : 'right'"
									visibility=":vml_${i}r ieq 2" />
							</ui:for>
						</ui:if>
		
						<!-- text -->
						<text x="0" y="0" halign="1" valign="-1" text="graph.values.min" />
						<text x="0" y="1" halign="-1" valign="-1" text="graph.values.max" />
						<text x="0" y="0.5" halign="0" valign="-1" text="graph.axis.depth" />
						<ui:for id="i" first="1" count="7">
							<text x="${:i*45}" y="0" halign="1" valign="1" text="graph.values.x:deg" text:value="${:i*45}" />
						</ui:for>
						<text x="360" y="0" halign="1" valign="1" text="graph.axis.phase" />
		
						<text x="360.0 - 3.6*:xfade" y="1" halign="-1" valign="1" text="labels.lfo.crossfade" color="graph_marker_cycle" color.a="0.5"/>
					</graph>
				</cell>
				
				<!-- Row 3 -->
				<cell cols="4">
					<graph hfill="true" height.min="64">
						<origin hpos="-1" vpos="0" visibility="false" />
						<axis angle="0" min="0" max="(((:lfo2) and (:ld_2 gt :ld_1)) ? :ld_2 : :ld_1) + :depth + 5" visiblity="true" />
						<axis angle="0.5" min="-3" max="3" visibility="false" />
						<axis angle="0" min="0" max="1" />
						
						<ui:with color="graph_alt_2">
							<marker v="2.5" />
							<marker v="5" />
							<marker v="7.5" />
							<marker v="12.5" />
							<marker v="15" />
							<marker v="17.5" />
							<marker v="22.5" />
							<marker v="25" />
							<marker v="27.5" />
							<marker v="32.5" />
							<marker v="35" />
							<marker v="37.5" />
						</ui:with>
						
						<ui:with color="graph_alt_1">
							<marker v="10" />
							<marker v="30" />
						</ui:with>
						
						<ui:with color="graph_sec">
							<marker v="20" />
						</ui:with>
						
						<!-- Markers -->
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<marker v=":vmd_${i}" color="graph_mesh" color.a="0.65"
									visibility=":vml_${i} ine 0" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<marker v=":vmd_${i}l"
									color="(:ms) ? 'mid' : 'left'" color.a="0.65"
									visibility=":vml_${i}l ine 0" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<marker v=":vmd_${i}r"
									color="(:ms) ? 'side' : 'right'" color.a="0.65"
									visibility=":vml_${i}r ine 0" />
							</ui:for>
						</ui:if>
						
						<!-- Dots -->
						<ui:if test="!(ex :in_r)">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmd_${i}" y="(:vml_${i} ieq 1) ? 1.5 : -1.5" color="graph_mesh" bcolor="graph_mesh"
									visibility=":vml_${i} ine 0" />
							</ui:for>
						</ui:if>
						<ui:if test="ex :in_r">
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmd_${i}l" y="(:vml_${i}l ieq 1) ? 2 : -1"
									color="(:ms) ? 'mid' : 'left'"
									bcolor="(:ms) ? 'mid' : 'left'"
									visibility=":vml_${i}l ine 0" />
							</ui:for>
							<ui:for id="i" first="1" count="16">
								<dot x.id="vmd_${i}r" y="(:vml_${i}r ieq 1) ? 1 : -2"
									color="(:ms) ? 'side' : 'right'"
									bcolor="(:ms) ? 'side' : 'right'"
									visibility=":vml_${i}r ine 0" />
							</ui:for>
						</ui:if>
						
						<!-- Text -->
						<ui:with y="0" valign="-1" halign="1" pgroup="0" priority="30">
							<text x="2.5" text="2.5" />
							<text x="7.5" text="7.5" />
							<text x="12.5" text="12.5" />
							<text x="17.5" text="17.5" />
							<text x="22.5" text="22.5" />
							<text x="27.5" text="27.5" />
							<text x="32.5" text="32.5" />
							<text x="37.5" text="37.5" />
						</ui:with>
						
						<ui:with y="0" valign="-1" halign="1" pgroup="0" priority="20">
							<text x="5" text="5" />
							<text x="15" text="15" />
							<text x="25" text="25" />
							<text x="35" text="35" />
						</ui:with>
						
						<ui:with y="0" valign="-1" halign="1" pgroup="0" priority="10">
							<text x="10" text="10" />
							<text x="20" text="20" />
							<text x="30" text="30" />
							<text x="40" text="40" />
						</ui:with>
						
						<ui:with ox="2" y="0" valign="-1"  pgroup="0" priority="0">
							<text x="0" halign="1" text="0" />
							<text x="1" halign="-1" text="graph.units.ms" />
						</ui:with> 
					</graph>
				</cell>
				
				<!-- Row 4 -->
				<ui:for id="i" first="1" count="2">
					<cell cols="2">
						<label text="labels.lfo.type" pad.v="4"/>
					</cell>
				</ui:for>
				
				<!-- Row 5 -->
				<ui:for id="i" first="1" count="2">
					<cell cols="2">
						<hbox pad.h="6" pad.b="4">
							<combo id="lt_${i}" hfill="true" />
							<combo id="lp_${i}" hfill="true" pad.l="6"/>
						</hbox>
					</cell>
				</ui:for>
				
				<!-- Rows 6, 7 -->
				<ui:for id="i" first="1" count="2">
					<label text="labels.overlap" />
					<cell rows="2">
						<knob id="lo_${i}" />
					</cell>
				</ui:for>
				<value id="lo_1" sline="true" />
				<value id="lo_2" sline="true" />
				
				<!-- Rows 8, 9 -->
				<ui:for id="i" first="1" count="2">
					<label text="labels.delay" />
					<cell rows="2">
						<knob id="ld_${i}" />
					</cell>
				</ui:for>
				<value id="ld_1" sline="true" />
				<value id="ld_2" sline="true" />
				
				<!-- Rows 10, 11 -->
				<ui:for id="i" first="1" count="2">
					<label text="labels.lfo.phase" />
					<cell rows="2">
						<knob id="lip_${i}" />
					</cell>
				</ui:for>
				<value id="lip_1" sline="true" />
				<value id="lip_2" sline="true" />
				
				<!-- Rows 12, 13 -->
				<ui:for id="i" first="1" count="2">
					<label text="labels.lfo.phase_range" />
					<cell rows="2">
						<knob id="lvp_${i}" />
					</cell>
				</ui:for>
				<value id="lvp_1" sline="true" />
				<value id="lvp_2" sline="true" />
				
				<!-- Rows 14, 15 -->
				<ui:if test="ex :in_r">
					<ui:for id="i" first="1" count="2">
						<label text="labels.lfo.difference" />
						<cell rows="2">
							<knob id="lcp_${i}" />
						</cell>
					</ui:for>
					<value id="lcp_1" sline="true" />
					<value id="lcp_2" sline="true" />
				</ui:if>
			</grid>
		</group>
		<vbox>
			<!-- LFO -->
			<group text="labels.lfo" ipadding="0">
				<grid rows="5" cols="3">
					<!-- Row 1 -->
					<cell cols="3">
						<button id="reset" text="actions.restart" hfill="true" ui:inject="Button_yellow" height="19" pad.v="4" pad.h="6"/>
					</cell>
					<!-- Row 2 -->
					<cell cols="3"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
	
					<!-- Row 3 -->
					<!-- Rate -->
					<vbox fill="false" pad.v="4" pad.h="6">
						<combo id="time" fill="false" pad.h="6" pad.v="4" width="108"/>
						<hbox fill="false" pad.b="1" width="108" height="38" visibility=":time ieq 0">
							<align halign="-1">
								<knob id="rate"/>
							</align>
							<value id="rate" width="52" sline="true" />
						</hbox>
						<hbox fill="false" pad.b="1" width="108" height="38" visibility=":time ieq 1">
							<align halign="-1">
								<hbox width="52">
								<frac id="frac" pad.r="6" pad.b="2" pad.t="3" den.id="denom" max="8" color="green"  />
							</hbox>
							</align >
							<value id="frac" width="52" sline="true" />
						</hbox>
					</vbox>
					
					<!-- Separator -->
					<vsep vexpand="true" bg.color="bg" pad.h="2" />
					
					<!-- Tempo -->
					<vbox fill="false" pad.v="4" pad.h="6">
						<hbox height="43" fill="false" visibility="!:sync">
							<knob id="tempo" pad.r="6" />
							<vbox fill="false">
								<label text="labels.tempo" />
								<value id="tempo" width.min="48" same_line="true"/>
							</vbox>
						</hbox>
						<vbox fill="false"  visibility=":sync">
							<indicator id="_time_bpm" format="f4.1!" pad="0"  text_color="green"/>
							<hbox pad.t="3" fill="false" >
								<label text="labels.tempo"/>
								<label pad.l="6" text="labels.host_bpm" />
							</hbox>
						</vbox>
						<hbox pad.t="4" width="93">
							<button id="sync" text="labels.sync" fill="true" ui:inject="Button_green"/>
							<ttap id="tempo" text="actions.tap" pad.l="6" fill="true" tcolor="label_text" visibility="!:sync"/>
						</hbox>
					</vbox>
					
					<!-- Row 4 -->
					<cell cols="3"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
	
					<!-- Row 5 -->
					<!-- Crossfade -->
					<vbox fill="false">
						<hbox fill="false" pad.t="4" width="108">
							<align halign="-1">
								<knob id="xfade" />
							</align>
							<vbox>
								<label text="labels.lfo.crossfade" />
								<value id="xfade" sline="true"/>
							</vbox>
						</hbox>
						<combo id="xtype" fill="false" pad.h="6" pad.b="4" width="108"/>
					</vbox>
					
					<!-- Separator -->
					<vsep vexpand="true" bg.color="bg" pad.h="2" />
					
					<!-- Parameters -->
					<grid rows="3" cols="2" fill="false">
						<label width="54" text="labels.depth"/>
						<label width="54" text="labels.lfo.voices"/>
						
						<knob pad.l="1" id="depth"/>
						<combo id="voices"/>
						
						<value id="depth" sline="true"/>
						<void />
					</grid>
				</grid>
			</group>
			<!-- LFO -->
			<group text="labels.controls" ipadding="0">
				<grid rows="12" cols="2" >
					<!-- mid/side -->
					<cell cols="2">
						<vbox >
							<void visibility="ex :in"/>
							<hbox hfill="true" pad.v="4" pad.h="6" visibility="ex :in_l">
								<button id="ms" width.min="98" text="labels.chan.mid_side" hfill="true" ui:inject="Button_mid" height="19" />
								<button id="mono" width.min="98" text="labels.signal.mono" hfill="true" pad.l="6" ui:inject="Button_mono" height="19" />
							</hbox>
							<hsep pad.v="2" bg.color="bg" vreduce="true" visibility="ex :in_l"/>
						</vbox>
					</cell>
					<!-- oversampling -->
					<cell cols="2">
						<vbox pad.v="4" pad.h="6" vfill="false" vexpand="false">
							<label text="labels.oversampling" pad.b="4"/>
							<combo id="ovs"/>
						</vbox>
					</cell>
					<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
					<!-- phase amount -->
					<cell cols="2"><void vexpand="true"/></cell>
					<align halign="1">
						<button id="sphase" text="labels.signal.phase" fill="false" pad.v="4" pad.h="6" ui:inject="Button_orange"  width="101" height="34" />
					</align>
					<align halign="-11">
						<hbox fill="false" pad.v="4" pad.h="6">
							<knob id="amount" pad.r="6"/>
							<vbox>
								<label text="labels.amount" />
								<value id="amount" width="48" same_line="true"/>
							</vbox>
						</hbox>
					</align>
					<cell cols="2"><void vexpand="true"/></cell>
					<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
					<!-- feedback -->
					<ui:with bright=":fb_on ? 1 : 0.75" bg.bright=":fb_on ? 1.0 : :const_bg_darken">
						<cell cols="2"><void vexpand="true"/></cell>
						<cell cols="2">
							<hbox pad.v="4" pad.h="6">
								<button id="fb_on" width.min="98" text="labels.feedback" hfill="true" ui:inject="Button_cyan" height="19" />
								<button id="fphase" width.min="98" text="labels.signal.phase" hfill="true" pad.l="6" ui:inject="Button_orange" height="19" />
							</hbox>
						</cell>
						<hbox fill="false" pad.v="4" pad.h="6">
							<knob id="fgain" pad.r="6" scolor=":fb_on ? 'kscale' : 'cycle_inactive'"/>
							<vbox>
								<label text="labels.gain" />
								<value id="fgain" width="48" same_line="true"/>
							</vbox>
						</hbox>
						<hbox fill="false" pad.v="4" pad.r="6">
							<knob id="fdelay" pad.r="6" scolor=":fb_on ? 'kscale' : 'cycle_inactive'"/>
							<vbox>
								<label text="labels.delay" />
								<value id="fdelay" width="48" same_line="true"/>
							</vbox>
						</hbox>
						<cell cols="2"><void vexpand="true"/></cell>
					</ui:with>
				</grid>
			</group>
			<group text="groups.signal" ipadding="0">
				<grid rows="3" cols="5">
					<label text="labels.chan.input" />
					<label text="labels.signal.dry" />
					<label text="labels.signal.wet" />
					<label text="labels.signal.drywet" />
					<label text="labels.chan.output" />

					<knob id="g_in" pad.h="6" pad.v="4"/>
					<knob id="dry" scolor="dry" pad.h="6" pad.v="4"/>
					<knob id="wet" scolor="wet" pad.h="6" pad.v="4"/>
					<knob id="drywet" scolor="drywet" pad.h="6" pad.v="4"/>
					<knob id="g_out" pad.h="6" pad.v="4"/>

					<value id="g_in" width.min="56" sline="true"/>
					<value id="dry" width.min="56" sline="true"/>
					<value id="wet" width.min="56" sline="true"/>
					<value id="drywet" width.min="56" sline="true"/>
					<value id="g_out" width.min="56" sline="true"/>
				</grid>
			</group>
		</vbox>
	</hbox>
</plugin>
